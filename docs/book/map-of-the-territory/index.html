<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Map of the territory | Grox</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://grokking-vietnam.github.io//grox/docs/book/map-of-the-territory"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Map of the territory | Grox"><meta data-react-helmet="true" name="description" content="Giá»›i thiá»‡u vá» cÃ¡c khÃ¡i niá»‡m cÄƒn báº£n, cÃ¡c giai Ä‘oáº¡n thá»±c thi cá»§a compiler."><meta data-react-helmet="true" property="og:description" content="Giá»›i thiá»‡u vá» cÃ¡c khÃ¡i niá»‡m cÄƒn báº£n, cÃ¡c giai Ä‘oáº¡n thá»±c thi cá»§a compiler."><link data-react-helmet="true" rel="icon" href="/grox/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://grokking-vietnam.github.io//grox/docs/book/map-of-the-territory"><link data-react-helmet="true" rel="alternate" href="https://grokking-vietnam.github.io//grox/docs/book/map-of-the-territory" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://grokking-vietnam.github.io//grox/docs/book/map-of-the-territory" hreflang="x-default"><link rel="stylesheet" href="/grox/assets/css/styles.d0db87f0.css">
<link rel="preload" href="/grox/assets/js/runtime~main.8e20a5bc.js" as="script">
<link rel="preload" href="/grox/assets/js/main.be6db770.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/grox/"><div class="navbar__logo"><img src="https://avatars.githubusercontent.com/u/9639466?s=45&amp;v=4" alt="Grox Language Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="https://avatars.githubusercontent.com/u/9639466?s=45&amp;v=4" alt="Grox Language Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Grox</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/grox/docs">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/grokking-vietnam/grox" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grox/docs/">Má»¥c lá»¥c</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grox/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/grox/docs/book/lox-language">Crafting Interpeters</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/grox/docs/book/lox-language">lox-language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/grox/docs/book/map-of-the-territory">Map of the territory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/grox/docs/book/scanning">Scanning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/grox/docs/book/representing-code">Representing Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/grox/docs/book/parsing-expression">Parsing Expression</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/grox/docs/fp/parser-combinators">Functional Programming</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grox/docs/resources">Resources</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Map of the territory</h1></header><p>Giá»›i thiá»‡u vá» cÃ¡c khÃ¡i niá»‡m cÄƒn báº£n, cÃ¡c giai Ä‘oáº¡n thá»±c thi cá»§a compiler.</p><ul><li><a href="#the-parts-of-a-language">The Parts of a Language</a><ul><li><a href="#scanning">Scanning/Lexing</a></li><li><a href="#parsing">Parsing</a></li><li><a href="#static-analysis">Static analysis</a></li><li><a href="#intermediate-representation">Intermediate representations</a></li><li><a href="#optimization">Optimization</a></li><li><a href="#code-generation">Code Generation</a></li><li><a href="#virtual-machine">Virtual Machine</a></li><li><a href="#runtime">Runtime</a></li></ul></li><li><a href="#shortcut-and-alternative-routes">Shortcut and alternative routes</a><ul><li><a href="#single-pass-compilers">Single-pass compilers</a></li><li><a href="#tree-walk-interpreters">Tree-walk interpreters</a></li><li><a href="#transpiler">Transpiler</a></li><li><a href="#just-in-time-compilation">Just-in-time compilation</a></li></ul></li><li><a href="#compilers-vs-interpreters">Compilers vs interpreters</a></li></ul><p><img src="https://i.imgur.com/875BQl5.png" alt="The Map"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="the-parts-of-a-language">The Parts of a Language<a class="hash-link" href="#the-parts-of-a-language" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="scanning">Scanning<a class="hash-link" href="#scanning" title="Direct link to heading">â€‹</a></h3><p>CÃ²n Ä‘Æ°á»£c gá»i lÃ  lexing hoáº·c lexical analysis. Má»™t scanner (hoáº·c lexer) nháº­n má»™t string vÃ  chia nhá» nÃ³ thÃ nh má»™t chuá»—i cá»§a token.</p><p>Tokens cÃ³ thá»ƒ coi nhÆ° &quot;tá»«&quot; vÃ  dáº¥u cÃ¢u, Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ táº¡o nÃªn ngá»¯ phÃ¡p cá»§a má»™t ngÃ´n ngá»¯.
<img src="https://i.imgur.com/ETU1ZVC.png" alt="ex1"></p><p>Fun fact: <strong>Lexical</strong> comes from the Greek root <strong>lex</strong>, meaning <strong>word</strong></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="parsing">Parsing<a class="hash-link" href="#parsing" title="Direct link to heading">â€‹</a></h3><p>Parsers cÃ³ Ä‘áº§u vÃ o lÃ  má»™t chuá»—i token vÃ  tráº£ vá» má»™t cáº¥u trÃºc dá»¯ liá»‡u kiá»ƒu cÃ¢y thÆ°á»ng Ä‘Æ°á»£c gá»i lÃ  parse tree hoáº·c abstract syntax tree(AST) hoáº·c syntax trees. ThÃªm vÃ o Ä‘Ã³ parsers cÃ²n cÃ³ nhiá»‡m vá»¥ thÃ´ng bÃ¡o cÃ¡c lá»—i ngá»¯ phÃ¡p (syntax error) cho ngÆ°á»i dÃ¹ng.</p><p>Äá»‘i chiáº¿u vá»›i cÃ¡c ngÃ´n ngá»¯ nÃ³i thÃ¬, scanner sáº½ chia nhá» má»™t Ä‘oáº¡n vÄƒn thÃ nh tá»«ng tá»«, dáº¥u cÃ¢u; cÃ²n parser sáº½ dá»±a vÃ o Ä‘Ã³ mÃ  phÃ¢n tÃ­ch ngá»¯ phÃ¡p cáº£ Ä‘oáº¡n vÄƒn.</p><p><img src="https://i.imgur.com/26k6LOJ.png" alt="AST"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="static-analysis">Static analysis<a class="hash-link" href="#static-analysis" title="Direct link to heading">â€‹</a></h3><p>Dá»±a vÃ o ASTs tá»« giai Ä‘oáº¡n trÆ°á»›c, pháº§n nÃ y sáº½ lÃ m nhá»¯ng cÃ´ng viá»‡c sau:</p><ul><li><strong>binding/resolution</strong>: vá»›i má»—i Ä‘á»‹nh danh(identifier; vd: tÃªn biáº¿n hoáº·c tÃªn hÃ m), chÃºng ta cáº§n tÃ¬m nÆ¡i nÃ³ Ä‘á»‹nh nghÄ©a, nÆ¡i nÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng; pháº¡m vi(scope) há»£p lá»‡ cá»§a nÃ³.</li><li><strong>type checking</strong>: náº¿u má»™t ngÃ´n ngá»¯ thuá»™c dáº¡ng staticallly typed; khi khai bÃ¡o má»™t biáº¿n báº¥t ká»³, chÃºng ta pháº£i xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c type cá»§a biáº¿n Ä‘Ã³. VÃ  report type error khi cáº§n thiáº¿t.</li><li>Sau khi phÃ¢n tÃ­ch xong, chÃºng ta sáº½ lÆ°u láº¡i nhá»¯ng thÃ´ng tin cáº§n thiáº¿t Ä‘á»ƒ phá»¥c vá»¥ cho cÃ¡c giai Ä‘oáº¡n tiáº¿p theo. CÃ³ 3 cÃ¡ch lÆ°u chÃ­nh nhÆ° sau:<ol><li>ChÃ¨n ngay vÃ o ASTs dÆ°á»›i dáº¡ng <em>attributes</em></li><li>LÆ°u vÃ o <a href="https://www.geeksforgeeks.org/symbol-table-compiler/" target="_blank" rel="noopener noreferrer">Symbol Table</a>; thÃ´ng thÆ°á»ng dÃ nh cho identifiers vÃ  giÃ¡ trá»‹ cá»§a chÃºng.</li><li>Chuyá»ƒn háº³n sang má»™t cáº¥u trÃºc AST má»›i cÃ³ nhiá»u thÃ´ng tin hÆ¡n.</li></ol></li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="notes">Notes<a class="hash-link" href="#notes" title="Direct link to heading">â€‹</a></h4><p>3 giai Ä‘oáº¡n phÃ­a trÃªn Ä‘Æ°á»£c gá»i lÃ  pháº§n front end cá»§a compiler. CÃ¡c pháº§n Ä‘Æ°á»£c trÃ¬nh bÃ y tiáº¿p theo Ä‘Æ°á»£c gá»i lÃ  back end.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="intermediate-representation">Intermediate Representation<a class="hash-link" href="#intermediate-representation" title="Direct link to heading">â€‹</a></h3><p>CÃ³ thá»ƒ tÆ°á»Ÿng tÆ°á»£ng compiler nhÆ° má»™t pipeline, gá»“m 2 giai Ä‘oáº¡n (phase) lá»›n (front end vÃ  back end) vÃ  nhiá»u giai Ä‘oáº¡n nhá». Output cá»§a phase nÃ y sáº½ lÃ  input cá»§a phase kia.</p><p>Giai Ä‘oáº¡n front end táº­p trung chá»§ yáº¿u vÃ o pháº§n source code. Giai Ä‘oáº¡n back end táº­p trung vÃ o pháº§n cháº¡y chÆ°Æ¡ng trÃ¬nh (final architecture where the program will run). á» giá»¯a 2 giai Ä‘oáº¡n Ä‘Ã³ thÃ¬ code Ä‘Æ°á»£c lÆ°u dÆ°á»›i dáº¡ng <em>intermediate representation(IR)</em>. IR sáº½ khÃ´ng gáº¯n cháº·t vá»›i input (vd: source code) hay output (vd: binary code) cá»§a compiler. CÃ³ thá»ƒ coi IR nhÆ° má»™t interface giá»¯a 2 ngÃ´n ngá»¯ Ä‘Ã³.</p><p>Nhá» vÃ o IR, mÃ  chÃºng ta cÃ³ thá»ƒ support nhiá»u runtime má»™t cÃ¡ch dá»… dÃ ng: dÃ¹ng chung 1 front end, vÃ  má»—i runtime khÃ¡c nhau sáº½ cÃ³ backend cá»§a riÃªng nÃ³.</p><p>VÃ­ dá»¥ nhÆ° Kotlin, Scala Ä‘á»u cÃ³ thá»ƒ cháº¡y trÃªn 3 runtime khÃ¡c nhau: JVM, Javascript, Native. Hoáº·c <a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection" target="_blank" rel="noopener noreferrer">GCC</a> cÃ³ thá»ƒ biÃªn dá»‹ch hÃ ng tÃ¡ ngÃ´n ngá»¯ vÃ  cÃ³ thá»ƒ target trÃªn dÆ°á»›i 100 architectures khÃ¡c nhau.</p><p>IR cÃ³ 4 styles chÃ­nh:</p><ul><li>control flow graph</li><li>static single-assignment</li><li>continuation-passing style</li><li>three-address code</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="optimization">Optimization<a class="hash-link" href="#optimization" title="Direct link to heading">â€‹</a></h3><p>Sau khi cÃ³ Ä‘á»§ hiá»ƒu biáº¿t vá» chÆ°Æ¡ng trÃ¬nh Ä‘ang Ä‘Æ°á»£c compile, thÃ¬ chÃºng ta cÃ³ thá»ƒ tá»‘i Æ°u nÃ³ báº±ng cÃ¡ch thay chÆ°Æ¡ng trÃ¬nh nÃ y báº±ng má»™t chÆ°Æ¡ng trÃ¬nh khÃ¡c cÃ³ cÃ¹ng ngá»¯ nghÄ©a(same semantics - same input same output) nhÆ°ng hiá»‡u quáº£ hÆ¡n.</p><p>VÃ­ dá»¥ Ä‘Æ¡n giáº£n nháº¥t lÃ  <strong>constant folding</strong>, náº¿u má»™t biá»ƒu thá»©c luÃ´n luÃ´n cho ra má»™t káº¿t quáº£ duy nháº¥t; thÃ¬ chÃºng ta cÃ³ thá»ƒ dÃ¹ng káº¿t quáº£ nháº­n Ä‘Æ°á»£c Ä‘á»ƒ thay tháº¿ cho biá»ƒu thá»©c Ä‘Ã³ trong quÃ¡ trÃ¬nh compile.</p><p><code>pennyArea = 3.14159 * (0.75 / 2) * (0.75 / 2);</code></p><p>CÃ³ thá»ƒ thay tháº¿ báº±ng</p><p><code>pennyArea = 0.4417860938;</code></p><p>Optimization lÃ  má»™t nhÃ¡nh lá»›n trong máº£ng programming language, nhÆ°ng sáº½ khÃ´ng Ä‘Æ°á»£c Ä‘i sÃ¢u vÃ o trong quyá»ƒn sÃ¡ch nÃ y. Sau Ä‘Ã¢y lÃ  má»™t sá»‘ keyword Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm vá» nÃ³: â€œconstant propagationâ€, â€œcommon subexpression eliminationâ€, â€œloop invariant code motionâ€, â€œglobal value numberingâ€, â€œstrength reductionâ€, â€œscalar replacement of aggregatesâ€, â€œdead code eliminationâ€, â€œloop unrollingâ€.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="code-generation">Code generation<a class="hash-link" href="#code-generation" title="Direct link to heading">â€‹</a></h3><p>BÆ°á»›c cuá»‘i cÃ¹ng, sau khi optimization hoÃ n thÃ nh, chuyá»ƒn IR sang má»™t dáº¡ng code mÃ  mÃ¡y cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c. BÆ°á»›c nÃ y cÃ²n gá»i lÃ  <strong>Code Generation</strong> (hoáº·c <strong>code gen</strong>); Code á»Ÿ Ä‘Ã¢y lÃ  code dÃ nh cho mÃ¡y (vd: dáº¡ng assembly hoáº·c byte code trÃªn virtual machine), khÃ´ng pháº£i code dÃ nh <em>ngÆ°á»i</em> Ä‘á»c vÃ  viáº¿t.</p><p>ChÃºng ta cÃ³ má»™t sá»‘ lá»±a chá»n cho <strong>code</strong> á»Ÿ Ä‘Ã¢y:</p><ul><li>CPU instruction: Code cÃ³ thá»ƒ cháº¡y cá»±c nhanh, nhÆ°ng phá»©c táº¡p vÃ  tá»‘n ráº¥t nhiá»u cÃ´ng Ä‘á»ƒ viáº¿t.</li><li>Bytecode cháº¡y trÃªn virtual machine (Ä‘Æ°á»£c gá»i lÃ  bytecode vÃ¬ má»—i instruction Ä‘á»u cÃ³ Ä‘á»™ dÃ i lÃ  má»™t byte): CÃ³ thá»ƒ support nhiá»u cpu architecture dá»… dÃ ng hÆ¡n nhÆ°ng láº¡i pháº£i maintain virtual machine vÃ  tá»‘c Ä‘á»™ cÃ³ thá»ƒ khÃ´ng nhanh báº±ng cÃ¡ch trÆ°á»›c. (ChÃºng ta sáº½ chá»n phÆ°Æ¡ng Ã¡n nÃ y)</li><li>CÅ©ng lÃ  bytecode nhÆ°ng thay vÃ¬ dÃ¹ng virtual machine, chÃºng ta sáº½ viáº¿t má»™t mini-compiler cho má»—i má»™t architecture Ä‘á»ƒ chuyá»ƒn bytecode sang native code. Hay nÃ³i cÃ¡ch khÃ¡c lÃ  chÃºng ta sá»­ dá»¥ng bytecode nhÆ° má»™t IR.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="virtual-machine">Virtual machine<a class="hash-link" href="#virtual-machine" title="Direct link to heading">â€‹</a></h3><p><strong>Virtual machine</strong> (hoáº·c chÃ­nh xÃ¡c hÆ¡n lÃ  language virtual machines, gá»i táº¯t lÃ  VM) lÃ  má»™t chÆ°Æ¡ng trÃ¬nh cÃ³ cháº¡y má»™t dáº¡ng byte code á»Ÿ runtime. Code cháº¡y trÃªn VM sáº½ cháº­m hÆ¡n trÃªn native code nhÆ°ng cÃ´ng viá»‡c cá»§a compiler sáº½ Ä‘Æ¡n giáº£n hÆ¡n. Trong pháº§n 2 cá»§a quyá»ƒn sÃ¡ch nÃ y thÃ¬ cÅ©ng ta sáº½ implement má»™t VM báº±ng C vÃ  nÃ³ sáº½ cÃ³ thá»ƒ cháº¡y trÃªn táº¥t cáº£ cÃ¡c platfrom há»— trá»£ C compiler.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="runtime">Runtime<a class="hash-link" href="#runtime" title="Direct link to heading">â€‹</a></h3><p>á» Ä‘Ã¢y chÃºng ta Ä‘Ã£ cÃ³ má»™t chÆ°Æ¡ng trÃ¬nh mÃ  ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ sá»­ dá»¥ng. BÆ°á»›c cuá»‘i cÃ¹ng cháº¡y chÆ°Æ¡ng trÃ¬nh Ä‘Ã³. Náº¿u chÃºng ta compiled thÃ nh native code, thÃ¬ operating system sáº½ táº£i chÆ°Æ¡ng trÃ¬nh vÃ  cháº¡y nÃ³, náº¿u compiled thÃ nh bytecode thÃ¬ chÃºng ta cáº§n khá»Ÿi Ä‘á»™ng VM rá»“i táº£i chÆ°Æ¡ng trÃ¬nh trÃªn cÃ¡i VM Ä‘Ã³.</p><p>Trong cáº£ 2 trÆ°á»ng há»£p Ä‘Ã³ chÃºng ta váº«n cáº§n pháº£i má»™t sá»‘ services cháº¡y ngáº§m Ä‘á»ƒ nhá»©:</p><ul><li>Quáº£n lÃ½ memory/gabarge collector</li><li>Náº¿u language há»— trá»£ runtim checking (vd: <code>instance of</code>), chÃºng ta cáº§n náº¯m Ä‘Æ°á»£c type cá»§a tá»«ng object trong cáº£ quÃ¡ trÃ¬nh thá»±c thi.</li></ul><p>Táº¥t cáº£ nhá»¯ng thá»© Ä‘Ã³ Ä‘Æ°á»£c thá»±c hiá»‡n trong lÃºc cháº¡y chÆ°Æ¡ng trÃ¬nh nÃªn Ä‘Æ°á»£c gá»i lÃ  runtime.</p><p>á» nhá»¯ng ngÃ´n ngá»¯ Ä‘Æ°á»£c compile hoÃ n toÃ n thÃ nh native code, thÃ¬ runtime Ä‘Æ°á»£c Ä‘Ã­nh kÃ¨m luÃ´n vÃ o chÆ°Æ¡ng trÃ¬nh (vd nhÆ° Golang).</p><p>Náº¿u má»™t ngÃ´n ngá»¯ Ä‘Æ°á»£c cháº¡y trong má»™t interpreter hoáº·c VM thÃ¬ runtime lÃ  má»™t pháº§n cá»§a interpreter/VM. Äa pháº§n cÃ¡c ngÃ´n ngá»¯ Ä‘Æ°á»£c implement dÆ°á»›i dáº¡ng nÃ y: Java, Python, Javascript.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="shortcut-and-alternative-routes">Shortcut and alternative routes<a class="hash-link" href="#shortcut-and-alternative-routes" title="Direct link to heading">â€‹</a></h2><p>Pháº§n trÃªn Ä‘Ã£ mÃ´ táº£ táº¥t cáº£ cÃ¡c bÆ°á»›c mÃ  chÃºng ta cÃ³ thá»ƒ pháº£i implement. Ráº¥t nhiá»u ngÃ´n ngá»¯ Ä‘Æ°á»£c viáº¿t vá»›i Ä‘áº§y Ä‘á»§ cÃ¡c bÆ°á»›c Ä‘Ã³, nhÆ°ng cÅ©ng cÃ³ má»™t sá»‘ con Ä‘Æ°á»ng táº¯t vÃ  thay tháº¿.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="single-pass-compilers">Single-pass compilers<a class="hash-link" href="#single-pass-compilers" title="Direct link to heading">â€‹</a></h3><p>CÃ³ má»™t sá»‘ compiler gá»™p parsing, analysis vÃ  code generation láº¡i lÃ m má»™t, thÃ nh ra output code Ä‘Æ°á»£c trá»±c tiáº¿p táº¡o ra tá»« parser. ChÃºng khÃ´ng sá»­ dá»¥ng ASTs cÅ©ng nhÆ° IRs trong quÃ¡ trÃ¬nh biÃªn dá»‹ch. ChÃºng Ä‘Æ°á»£c gá»i lÃ  <strong>single-pass compilers</strong>.</p><p>Nhá»¯ng <strong>single-pass compilers</strong> nÃ y sáº½ cÃ³ nhiá»u giá»›i háº¡n:</p><ul><li>KhÃ´ng cÃ³ má»™t cáº¥u trÃºc dá»¯ liá»‡u trung gian Ä‘á»ƒ lÆ°u láº¡i global information</li><li>KhÃ´ng thá»ƒ quay láº¡i cÃ¡c pháº§n trÆ°á»›c cá»§a chÆ°Æ¡ng trÃ¬nh. NghÄ©a lÃ  khi compiler tháº¥y má»™t biá»ƒu thá»©c nÃ o Ä‘Ã³ thÃ¬ nÃ³ pháº£i cÃ³ kháº£ nÄƒng biÃªn dá»‹ch biá»ƒu thá»©c Ä‘Ã³ ngay.</li></ul><p>Pascal vÃ  C cÃ³ chung nhá»¯ng cÃ¡i Ä‘iá»ƒm yáº¿u nÃ y, Ä‘Ã³ lÃ  lÃ½ do táº¡i sao Pascal yÃªu cáº§u pháº£i khai bÃ¡o kiá»ƒu cá»§a biáº¿n á»Ÿ Ä‘áº§u file; cÅ©ng nhÆ° vá»›i C ta khÃ´ng thá»ƒ gá»i má»™t function trÆ°á»›c khi nÃ³ Ä‘Æ°á»£c khai bÃ¡o (trá»« khi ta khai bÃ¡o function Ä‘Ã³ vá»›i forward declaration).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tree-walk-interpreters">Tree-walk interpreters<a class="hash-link" href="#tree-walk-interpreters" title="Direct link to heading">â€‹</a></h3><p>LÃ  nhá»¯ng ngÃ´n ngá»¯ Ä‘Æ°á»£c thá»±c thi sau khi cÃ³ AST (cÃ³ thá»ƒ cÃ³ thÃªm má»™t Ã­t static analysis). Äá»ƒ thá»±c thi chÆ°Æ¡ng trÃ¬nh, intepreter duyá»‡t tá»«ng node cá»§a AST, thay tháº¿ dáº§n dáº§n cÃ¡c node báº±ng káº¿t quáº£ tÃ­nh Ä‘Æ°á»£c Ä‘áº¿n táº­n cÃ¹ng. ÄÃ¢y cÅ©ng lÃ  cÃ¡ch chÃºng ta implement interpreter Ä‘áº§u tiÃªn.</p><p>Notes: Nhá»¯ng phiÃªn báº£n Ä‘áº§u tiÃªn cá»§a Ruby Ä‘Æ°á»£c implement dÆ°á»›i dáº¡ng nÃ y.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="transpiler">Transpiler<a class="hash-link" href="#transpiler" title="Direct link to heading">â€‹</a></h3><p>KhÃ¡ lÃ  phá»• biáº¿n hiá»‡n nay, Ä‘áº·c biá»‡t vá»›i javascript lÃ  ngÃ´n ngá»¯ má»¥c tiÃªu. Transpiler lÃ  má»™t compiler biÃªn dá»‹ch code tá»« ngÃ´n ngá»¯ nÃ y sang má»™t ngÃ´n ngá»¯ khÃ¡c, thÆ°á»ng tá»« báº­c cao (higher level) sang báº­c tháº¥p hÆ¡n (lower level).</p><p>Pháº§n front end cá»§a nhá»¯ng compiler nÃ y thÃ¬ giá»‘ng há»‡t cÃ¡c compiler khÃ¡c. Sau Ä‘Ã³ tuá»³ thuá»™c vÃ o sá»± khÃ¡c nhau giá»¯a hai ngÃ´n ngá»¯, implementation cá»§a back end cÃ³ thá»ƒ ráº¥t khÃ¡c nhau. Tá»« Ä‘Æ¡n giáº£n chuyá»ƒn tháº³ng tá»« AST sang target language hoáº·c bao gá»“m táº¥t cáº£ cÃ¡c bÆ°á»›c ká»ƒ trÃªn.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="just-in-time-compilation">Just-in-time compilation<a class="hash-link" href="#just-in-time-compilation" title="Direct link to heading">â€‹</a></h3><p>CÃ¡ch nhanh nháº¥t Ä‘á»ƒ thá»±c thi code Ä‘Ã³ lÃ  biÃªn dá»‹ch nÃ³ thÃ nh native code. NhÆ°ng khi biÃªn dá»‹ch thÃ¬ chÃºng ta khÃ´ng biáº¿t Ä‘Æ°á»£c nÃ³ sáº½ Ä‘Æ°á»£c cháº¡y vá»›i kiá»ƒu architecture nÃ o. Just-in-time (JIT) lÃ  má»™t ká»¹ thuáº­t cao cáº¥p Ä‘Æ°á»£c Ä‘á»ƒ tá»‘i Æ°u hoÃ¡ tá»‘c Ä‘á»™c cá»§a chÆ°Æ¡ng trÃ¬nh trong trÆ°á»ng há»£p nÃ y. JIT Ä‘Æ°á»£c sá»± dá»¥ng bá»Ÿi Hotspot Java Virtual Machine (JVM), Microsoft&#x27;s Common Language Runtime (CLR) vÃ  Ä‘a sá»‘ cÃ¡c trÃ¬nh biÃªn dá»‹ch cá»§a Javascript.</p><p>Khi chÆ°Æ¡ng trÃ¬nh Ä‘Æ°á»£c táº£i lÃªn - tá»« source trong trÆ°á»ng há»£p cá»§a Javascript hay tá»« bytecode nhÆ° cá»§a JVM/CLR - thÃ¬ JIT sáº½ compile nÃ³ thÃ nh native code ngay lÃºc Ä‘Ã³.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="compilers-vs-interpreters">Compilers vs Interpreters<a class="hash-link" href="#compilers-vs-interpreters" title="Direct link to heading">â€‹</a></h2><ul><li>Compiling (biÃªn dá»‹ch) lÃ  quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i tá»« má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh sang má»™t dáº¡ng má»›i: bytecode hoáº·c native code hoáº·c má»™t ngÃ´n ngá»¯ khÃ¡c.</li><li>Compiler thÃ¬ chá»‰ cÃ³ nhiá»‡m vá»¥ biÃªn dá»‹ch</li><li>Intepreter thÃ¬ cÃ³ kháº£ nÄƒng thá»±c thi chÆ°á»ng trÃ¬nh tá»« source code.</li></ul><p><img src="https://i.imgur.com/LLvek2X.png" alt="venn"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/../grox-docs/target/mdoc/book/2-map-of-the-territory.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/grox/docs/book/lox-language"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">lox-language</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/grox/docs/book/scanning"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scanning</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-parts-of-a-language" class="table-of-contents__link toc-highlight">The Parts of a Language</a><ul><li><a href="#scanning" class="table-of-contents__link toc-highlight">Scanning</a></li><li><a href="#parsing" class="table-of-contents__link toc-highlight">Parsing</a></li><li><a href="#static-analysis" class="table-of-contents__link toc-highlight">Static analysis</a></li><li><a href="#intermediate-representation" class="table-of-contents__link toc-highlight">Intermediate Representation</a></li><li><a href="#optimization" class="table-of-contents__link toc-highlight">Optimization</a></li><li><a href="#code-generation" class="table-of-contents__link toc-highlight">Code generation</a></li><li><a href="#virtual-machine" class="table-of-contents__link toc-highlight">Virtual machine</a></li><li><a href="#runtime" class="table-of-contents__link toc-highlight">Runtime</a></li></ul></li><li><a href="#shortcut-and-alternative-routes" class="table-of-contents__link toc-highlight">Shortcut and alternative routes</a><ul><li><a href="#single-pass-compilers" class="table-of-contents__link toc-highlight">Single-pass compilers</a></li><li><a href="#tree-walk-interpreters" class="table-of-contents__link toc-highlight">Tree-walk interpreters</a></li><li><a href="#transpiler" class="table-of-contents__link toc-highlight">Transpiler</a></li><li><a href="#just-in-time-compilation" class="table-of-contents__link toc-highlight">Just-in-time compilation</a></li></ul></li><li><a href="#compilers-vs-interpreters" class="table-of-contents__link toc-highlight">Compilers vs Interpreters</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/grox/docs/introduction">The Grox Programming Language</a></li><li class="footer__item"><a class="footer__link-item" href="/grox/docs/resources">Resources</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.grokking.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Grokking Vietnam<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/grokking.vietnam/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH2gAK9r_7EbvyVt0z5VibQ/featured" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/grokking-vietnam/grox" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Grokking Vietnam. Built with Docusaurus.</div></div></div></footer></div>
<script src="/grox/assets/js/runtime~main.8e20a5bc.js"></script>
<script src="/grox/assets/js/main.be6db770.js"></script>
</body>
</html>